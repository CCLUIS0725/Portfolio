<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luis Cabrera | UX/UI Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f8f9fc;
            --bg-secondary: #ffffff;
            --text-primary: #0e0f19;
            --text-secondary: #5a6072;
            --accent: #4f46e5;
            /* Indigo 600 */
            --accent-secondary: #9333ea;
            /* Purple 600 */
            --muted: rgba(14, 15, 25, 0.08);
            --shadow-color: rgba(14, 15, 25, 0.06);
            --card-blur: rgba(255, 255, 255, 0.75);
            --font-sans: "Inter", system-ui, -apple-system, sans-serif;
            --font-display: "Space Grotesk", sans-serif;
        }

        .theme-dark {
            --bg-primary: #050507;
            --bg-secondary: #0f111a;
            --text-primary: #f6f7fb;
            --text-secondary: #a0a4b8;
            --accent: #818cf8;
            /* Indigo 400 */
            --accent-secondary: #c084fc;
            /* Purple 400 */
            --muted: rgba(246, 247, 251, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.4);
            --card-blur: rgba(15, 17, 26, 0.7);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            scroll-behavior: smooth;
            transition: background 0.6s ease, color 0.6s ease;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        html::-webkit-scrollbar,
        body::-webkit-scrollbar {
            display: none;
        }

        ::selection {
            background: var(--accent);
            color: #fff;
        }

        .page {
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        header {
            position: absolute;
            /* Static relative to document flow, not fixed */
            top: 0;
            width: 100%;
            z-index: 999;
            padding: 2rem 5vw;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: transparent;
            /* Removed blur/bg for cleaner static look */
        }

        .logo {
            font-family: var(--font-display);
            font-size: 1.25rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 700;
        }


        /* --- Side stagger navigation (line stack) --- */
        .line-stack-nav {
            position: fixed;
            right: 2.5rem;
            top: 55%;
            /* Moved down slightly */
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 2.5rem;
            z-index: 800;
            /* Lower z-index than header if they were to overlap */
            pointer-events: auto;
            align-items: flex-end;
        }

        .line-stack-group {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
            pointer-events: auto;
        }

        .line-stack-title {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            padding: 0.25rem 0;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            --stack-progress: 0;
            --stack-emphasis: 0;
        }

        .line-stack-title::before {
            content: "";
            position: absolute;
            left: -2.5rem;
            top: 50%;
            width: 1.5rem;
            height: 2px;
            border-radius: 999px;
            background: var(--accent);
            transform-origin: left center;
            transform: scaleX(0);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .line-stack-lines {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
            align-items: flex-end;
        }

        .line-stack-lines span {
            display: block;
            height: 2px;
            border-radius: 999px;
            background: var(--text-secondary);
            opacity: 0.2;
            transform-origin: right center;
            transform: scaleX(0.5);
            transition: all 0.3s ease;
        }

        .line-stack-lines span.is-on {
            opacity: 1;
            background: var(--accent);
            transform: scaleX(1);
            box-shadow: 0 0 8px var(--accent);
        }

        .line-stack-lines span:nth-child(1) {
            width: 12px;
        }

        .line-stack-lines span:nth-child(2) {
            width: 20px;
        }

        .line-stack-lines span:nth-child(3) {
            width: 16px;
        }

        .line-stack-lines span:nth-child(4) {
            width: 18px;
        }

        .line-stack-lines span:nth-child(5) {
            width: 14px;
        }

        .line-stack-lines span:nth-child(6) {
            width: 10px;
        }

        .line-stack-lines span:nth-child(7) {
            width: 22px;
        }

        .line-stack-lines span:nth-child(8) {
            width: 18px;
        }

        .line-stack-lines span:nth-child(9) {
            width: 20px;
        }

        .line-stack-lines span:nth-child(10) {
            width: 12px;
        }

        .line-stack-lines span:nth-child(11) {
            width: 28px;
        }

        .line-stack-lines span:nth-child(12) {
            width: 24px;
        }

        .line-stack-group:hover .line-stack-title {
            transform: translateX(-5px);
            color: var(--text-primary);
        }

        .line-stack-group.is-active .line-stack-title {
            color: var(--accent);
            transform: translateX(-12px);
            font-weight: 700;
            /* Base size 0.75rem, scales up by 0.75rem (total 1.5rem = 2x) based on emphasis */
            font-size: calc(0.75rem + 0.75rem * var(--stack-emphasis, 0));
        }

        .line-stack-group.is-active .line-stack-title::before {
            transform: scaleX(1);
            opacity: 1;
        }

        .theme-dark .line-stack-title {
            color: color-mix(in srgb, var(--text-secondary) 50%, var(--accent) 15%);
        }

        .theme-dark .line-stack-lines span {
            background: color-mix(in srgb, #ffffff 30%, transparent);
        }

        .theme-dark .line-stack-lines span.is-on {
            background: color-mix(in srgb, var(--accent) 80%, #ffffff 20%);
        }

        .scroll-progress {
            position: fixed;
            top: 0.5rem;
            left: 50%;
            transform: translateX(-50%);
            width: 90vw;
            height: 4px;
            border-radius: 999px;
            background: color-mix(in srgb, var(--muted) 50%, transparent);
            overflow: hidden;
            z-index: 950;
            display: none;
        }

        .scroll-progress-bar {
            width: 0%;
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
            transition: width 0.15s ease;
        }

        @media (max-width: 1024px) {
            .line-stack-nav {
                display: none;
            }

            .scroll-progress {
                display: block;
            }
        }

        .theme-toggle {
            position: relative;
            width: 64px;
            height: 32px;
            border-radius: 32px;
            border: 1px solid var(--muted);
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            padding: 0 6px;
            cursor: pointer;
            gap: 0.25rem;
            transition: background 0.4s ease, border 0.4s ease;
        }

        .toggle-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            font-size: 0.75rem;
        }

        .toggle-thumb {
            position: absolute;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            transform: translateX(0);
            transition: transform 0.45s cubic-bezier(0.65, 0, 0.35, 1);
        }

        .theme-dark .toggle-thumb {
            transform: translateX(32px);
        }

        main {
            padding: 7rem 5vw 6rem;
        }

        section {
            min-height: 90vh;
            padding: 6rem 0;
            display: flex;
            align-items: center;
        }

        .section-inner {
            width: min(1200px, 95vw);
            margin: 0 auto;
        }

        h1,
        h2,
        h3 {
            font-family: "Space Grotesk", "Inter", sans-serif;
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        h2 {
            font-size: clamp(2rem, 4vw, 3.2rem);
            margin-bottom: 1.5rem;
        }

        .hero {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
            align-items: center;
        }

        .hero h1 {
            font-size: clamp(3rem, 6vw, 5rem);
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .cta-group {
            margin-top: 2.5rem;
            display: flex;
            gap: 1.2rem;
        }

        .btn {
            padding: 0.95rem 1.8rem;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.02em;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(130deg, var(--accent), var(--accent-secondary));
            color: #fff;
            box-shadow: 0 20px 40px -20px var(--shadow-color);
        }

        .btn-outline {
            border: 1px solid var(--muted);
            background: transparent;
            color: var(--text-primary);
        }

        .btn:hover {
            transform: translateY(-4px);
        }

        .hero-visual {
            position: relative;
            aspect-ratio: 4 / 5;
            border-radius: 32px;
            background: linear-gradient(160deg, rgba(92, 111, 248, 0.75), rgba(160, 123, 255, 0.65));
            overflow: hidden;
            box-shadow: 0 30px 60px -30px var(--shadow-color);
            max-width: 340px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-visual::after {
            content: "Luis Cabrera";
            position: absolute;
            inset: 0;
            display: grid;
            place-items: center;
            font-size: clamp(1.8rem, 4vw, 2.6rem);
            color: rgba(255, 255, 255, 0.75);
            font-weight: 600;
            letter-spacing: 0.6em;
            text-transform: uppercase;
        }

        .hero-heading-animated {
            min-height: clamp(7rem, 11vw, 14rem);
            margin-bottom: 1.25rem;
        }

        .decrypt-shell {
            display: inline-flex;
            flex-direction: column;
            width: 100%;
        }

        .decrypt-shell .decrypt-display {
            font-family: "Space Grotesk", "Inter", sans-serif;
            font-size: clamp(2.6rem, 6vw, 4.8rem);
            font-weight: 700;
            line-height: 1.05;
            letter-spacing: -0.03em;
            color: var(--text-primary);
        }

        .decrypt-char {
            display: inline-block;
            transition: color 0.2s ease, opacity 0.2s ease;
        }

        .decrypt-char.encrypted {
            color: var(--text-secondary);
            opacity: 0.45;
        }

        .decrypt-shell[data-animating="true"] .decrypt-char.encrypted {
            opacity: 0.65;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        .about {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 3rem;
            align-items: center;
        }

        .glass-card {
            background: var(--card-blur);
            border: 1px solid var(--muted);
            border-radius: 24px;
            padding: 2rem;
            box-shadow: 0 25px 45px -35px var(--shadow-color);
            backdrop-filter: blur(20px);
            transition: transform 0.45s ease, border 0.4s ease;
        }

        .glass-card:hover {
            transform: translateY(-8px);
            border-color: color-mix(in srgb, var(--accent) 35%, var(--muted));
        }

        .stats {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat {
            font-size: 1.75rem;
            font-weight: 600;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .project-card {
            border-radius: 36px;
            border: 1px solid var(--muted);
            overflow: hidden;
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
            transition: transform 0.5s ease, box-shadow 0.5s ease;
            box-shadow: 0 35px 65px -45px var(--shadow-color);
        }

        .project-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 35px 70px -35px var(--shadow-color);
        }

        .project-thumb {
            min-height: 240px;
            background: linear-gradient(140deg, rgba(92, 111, 248, 0.92), rgba(160, 123, 255, 0.9));
            color: rgba(255, 255, 255, 0.85);
            display: grid;
            place-items: center;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            font-size: 0.95rem;
        }

        .project-content {
            padding: 2.2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            height: 100%;
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
            margin-top: 2rem;
        }

        .skills-cloud {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            position: relative;
        }

        .skills-cloud .skill-pill {
            animation: float var(--float-duration, 9s) ease-in-out infinite;
            animation-delay: var(--float-delay, 0s);
        }

        .skills-bars {
            display: flex;
            flex-direction: column;
            gap: 1.3rem;
        }

        .skill-bar {
            padding: 1.3rem;
            border-radius: 18px;
            border: 1px solid var(--muted);
            background: var(--bg-secondary);
            box-shadow: 0 20px 40px -35px var(--shadow-color);
            transition: border 0.3s ease, transform 0.3s ease;
        }

        .skill-bar:hover {
            transform: translateY(-4px);
            border-color: color-mix(in srgb, var(--accent) 25%, var(--muted));
        }

        .skill-meta {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .skill-level {
            font-size: 0.95rem;
            color: var(--accent);
        }

        .bar-track {
            position: relative;
            height: 8px;
            border-radius: 999px;
            background: var(--muted);
            overflow: hidden;
        }

        .bar-fill {
            position: absolute;
            inset: 0;
            width: 0%;
            border-radius: inherit;
            background: linear-gradient(120deg, var(--accent), var(--accent-secondary));
            transition: width 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .skill-bar.filled .bar-fill {
            width: var(--target-level);
        }

        .skill-pill {
            padding: 0.7rem 1.3rem;
            border-radius: 999px;
            background: color-mix(in srgb, var(--accent) 15%, transparent);
            border: 1px solid color-mix(in srgb, var(--accent-secondary) 25%, var(--muted));
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.95rem;
            letter-spacing: 0.03em;
            transition: transform 0.35s ease;
        }

        .skill-pill:hover {
            transform: translateY(-5px);
            animation-play-state: paused;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        input,
        textarea {
            width: 100%;
            padding: 1rem;
            border-radius: 16px;
            border: 1px solid var(--muted);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: border 0.3s ease, box-shadow 0.3s ease;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 30%, transparent);
        }

        textarea {
            resize: vertical;
            min-height: 140px;
        }

        .social-links {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .social-links a {
            text-decoration: none;
            color: var(--accent);
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        footer {
            padding: 2rem 5vw 3rem;
            text-align: center;
            border-top: 1px solid var(--muted);
            color: var(--text-secondary);
        }

        .reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.9s cubic-bezier(0.19, 1, 0.22, 1),
                transform 0.9s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }


        .hero-loaded .hero h1,
        .hero-loaded .hero p,
        .hero-loaded .cta-group {
            animation: heroIn 1s ease forwards;
        }

        .hero-loaded .hero p {
            animation-delay: 0.15s;
        }

        .hero-loaded .cta-group {
            animation-delay: 0.3s;
        }

        @keyframes heroIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            from {
                transform: translateY(0);
            }

            to {
                transform: translateY(-12px);
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 1rem;
            }

            section {
                min-height: unset;
                padding: 4rem 0;
            }

            .stats {
                flex-wrap: wrap;
                gap: 1rem;
            }

        }
    </style>
</head>

<body>
    <div class="page">
        <header>
            <div class="logo">LC / UX</div>
            <button class="theme-toggle" aria-label="Toggle color mode">
                <span class="toggle-thumb"></span>
                <span class="toggle-icon">??</span>
                <span class="toggle-icon">??</span>
            </button>
        </header>
        <div class="scroll-progress" aria-hidden="true">
            <div class="scroll-progress-bar"></div>
        </div>

        <main>
            <section id="hero">
                <div class="section-inner hero">
                    <div>
                        <p class="kicker">UX / UI Designer</p>
                        <h1 class="sr-only">Crafting Intuitive Digital Experiences</h1>
                        <div class="decrypt-shell hero-heading-animated" data-decrypt-text
                            data-text="Crafting&#10;Intuitive Digital&#10;Experiences" data-speed="55"
                            data-max-iterations="22" data-sequential="true" data-reveal-direction="start"
                            data-characters="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*" data-animate-on="load">
                            <span class="sr-only">Crafting Intuitive Digital Experiences</span>
                            <span class="decrypt-display" data-decrypt-display aria-hidden="true"></span>
                        </div>
                        <p>
                            I'm Luis Cabrera, a multidisciplinary designer blending research, strategy, and
                            motion to build human-centered products for ambitious teams.
                        </p>
                        <div class="cta-group">
                            <button class="btn btn-primary">View My Work</button>
                            <button class="btn btn-outline">Download Résumé</button>
                        </div>
                    </div>
                    <div class="hero-visual" aria-hidden="true"></div>
                </div>
            </section>

            <section id="about">
                <div class="section-inner about reveal">
                    <div class="glass-card">
                        <h2>About Me</h2>
                        <p>
                            Over the last eight years, I've partnered with SaaS companies, fintech startups,
                            and global agencies to shape intuitive design systems and immersive product
                            experiences. My process blends qualitative research with rapid prototyping to
                            uncover elegant, scalable solutions.
                        </p>
                        <div class="stats">
                            <div>
                                <p class="stat">80+</p>
                                <p>Products launched</p>
                            </div>
                            <div>
                                <p class="stat">15</p>
                                <p>Design awards</p>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card">
                        <h3>Design Philosophy</h3>
                        <p>
                            I believe memorable digital experiences emerge from the interplay of empathy,
                            contrast, and motion. I focus on establishing narrative clarity, reducing
                            cognitive load, and revealing micro-interactions that guide users with intent.
                        </p>
                    </div>
                </div>
            </section>

            <section id="work">
                <div class="section-inner">
                    <div class="reveal">
                        <h2>Selected Work</h2>
                        <p class="section-desc">
                            A snapshot of product stories spanning enterprise dashboards, consumer mobile,
                            and data-rich platforms.
                        </p>
                    </div>
                    <div class="projects-grid">
                        <article class="project-card reveal">
                            <div class="project-thumb">Intuitive SaaS Dashboard</div>
                            <div class="project-content">
                                <h3>Lumen Analytics Platform</h3>
                                <p>
                                    Redefined the analytics workflow with adaptive panels, modular layouts,
                                    and motion cues that accelerate decision-making.
                                </p>
                                <a class="btn btn-outline" href="case-study.html?project=lumen">
                                    View Case Study
                                </a>
                            </div>
                        </article>
                        <article class="project-card reveal">
                            <div class="project-thumb">Mobile App Redesign</div>
                            <div class="project-content">
                                <h3>Nova Health Companion</h3>
                                <p>
                                    Crafted a calm, assistive patient companion with biometric insights,
                                    proactive nudges, and ambient storytelling.
                                </p>
                                <a class="btn btn-outline" href="case-study.html?project=nova">
                                    View Case Study
                                </a>
                            </div>
                        </article>
                        <article class="project-card reveal">
                            <div class="project-thumb">E-commerce Experience</div>
                            <div class="project-content">
                                <h3>Aero Essential Store</h3>
                                <p>
                                    Designed a high-conversion shopping journey with editorial storytelling,
                                    augmented fit guidance, and tactile micro-interactions.
                                </p>
                                <a class="btn btn-outline" href="case-study.html?project=aero">
                                    View Case Study
                                </a>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <section id="skills">
                <div class="section-inner">
                    <div class="reveal">
                        <h2>Skills & Toolset</h2>
                        <p>
                            Bridging research, visual systems, and code to deliver cohesive outcomes
                            end-to-end.
                        </p>
                    </div>
                    <div class="skills-grid">
                        <div class="skills-cloud">
                            <span class="skill-pill reveal">UX Research</span>
                            <span class="skill-pill reveal">UI Design</span>
                            <span class="skill-pill reveal">Design Systems</span>
                            <span class="skill-pill reveal">Rapid Prototyping</span>
                            <span class="skill-pill reveal">Figma</span>
                            <span class="skill-pill reveal">Adobe XD</span>
                            <span class="skill-pill reveal">HTML / CSS / JS</span>
                            <span class="skill-pill reveal">Micro-interactions</span>
                            <span class="skill-pill reveal">Motion Design</span>
                        </div>
                        <div class="skills-bars">
                            <div class="skill-bar reveal" data-level="92">
                                <div class="skill-meta">
                                    <span>Experience Strategy</span>
                                    <span class="skill-level">0%</span>
                                </div>
                                <div class="bar-track">
                                    <span class="bar-fill"></span>
                                </div>
                            </div>
                            <div class="skill-bar reveal" data-level="88">
                                <div class="skill-meta">
                                    <span>Design Systems</span>
                                    <span class="skill-level">0%</span>
                                </div>
                                <div class="bar-track">
                                    <span class="bar-fill"></span>
                                </div>
                            </div>
                            <div class="skill-bar reveal" data-level="84">
                                <div class="skill-meta">
                                    <span>Motion / Prototyping</span>
                                    <span class="skill-level">0%</span>
                                </div>
                                <div class="bar-track">
                                    <span class="bar-fill"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contact">
                <div class="section-inner contact-grid">
                    <div class="glass-card reveal">
                        <h2>Let's Collaborate</h2>
                        <p>
                            Ready to shape the next flagship experience? Drop a note and I will respond in
                            less than 24 hours.
                        </p>
                        <form>
                            <label>
                                <span>Name</span>
                                <input type="text" placeholder="Your name" required />
                            </label>
                            <label>
                                <span>Email</span>
                                <input type="email" placeholder="you@email.com" required />
                            </label>
                            <label>
                                <span>Project details</span>
                                <textarea placeholder="Tell me about your vision"></textarea>
                            </label>
                            <button class="btn btn-primary" type="submit">Send Message</button>
                        </form>
                    </div>
                    <div class="glass-card reveal">
                        <h3>Connect</h3>
                        <p>
                            Follow my latest explorations in spatial interfaces, AI copilots, and expressive
                            motion systems.
                        </p>
                        <div class="social-links">
                            <a href="#">LinkedIn ?</a>
                            <a href="#">Dribbble ?</a>
                            <a href="#">Behance ?</a>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <nav class="line-stack-nav" aria-label="Section navigation">
            <div class="line-stack-group is-active" data-section="hero">
                <a class="line-stack-title" href="#hero">Intro</a>
                <div class="line-stack-lines">
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
            </div>
            <div class="line-stack-group" data-section="about">
                <a class="line-stack-title" href="#about">About</a>
                <div class="line-stack-lines">
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
            </div>
            <div class="line-stack-group" data-section="work">
                <a class="line-stack-title" href="#work">Work</a>
                <div class="line-stack-lines">
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
            </div>
            <div class="line-stack-group" data-section="skills">
                <a class="line-stack-title" href="#skills">Skills</a>
                <div class="line-stack-lines">
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
            </div>
            <div class="line-stack-group" data-section="contact">
                <a class="line-stack-title" href="#contact">Contact</a>
            </div>
        </nav>
        <footer>
            © 2024 Luis Cabrera — Available for select collaborations.
        </footer>
    </div>

    <script>
        const throttle = (func, limit) => {
            let inThrottle;
            return function () {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }

        class DecryptedTextEffect {
            constructor(container) {
                this.container = container;
                this.text = (container.dataset.text || container.textContent || '').replace(/\\n/g, '\n');
                this.speed = Number(container.dataset.speed) || 50;
                this.maxIterations = Number(container.dataset.maxIterations) || 10;
                this.sequential = container.dataset.sequential === 'true';
                this.revealDirection = container.dataset.revealDirection || 'start';
                this.characters =
                    container.dataset.characters ||
                    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()_+';
                this.animateOn = container.dataset.animateOn || 'hover';
                this.displayEl = container.querySelector('[data-decrypt-display]') || container;
                this.srText = container.querySelector('.sr-only');
                if (this.srText) {
                    this.srText.textContent = this.text.replace(/\n/g, ' ');
                }
                this.fixedIndices = new Set();
                this.text.split('').forEach((char, index) => {
                    if (char === ' ' || char === '\n') {
                        this.fixedIndices.add(index);
                    }
                });
                this.revealed = new Set(this.fixedIndices);
                this.iteration = 0;
                this.interval = null;
                this.isScrambling = false;
                this.hasAnimated = false;
                this.updateDisplay(this.text);
                this.attachEvents();
                if (this.animateOn === 'view' || this.animateOn === 'both') {
                    this.observe();
                }
                if (this.animateOn === 'load') {
                    this.start();
                }
            }

            attachEvents() {
                if (this.animateOn === 'hover' || this.animateOn === 'both') {
                    this.container.addEventListener('mouseenter', () => this.start());
                    if (this.animateOn === 'hover') {
                        this.container.addEventListener('mouseleave', () => this.finish());
                    }
                }
            }

            observe() {
                this.observer = new IntersectionObserver(
                    entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting && !this.hasAnimated) {
                                this.hasAnimated = true;
                                this.start();
                                if (this.animateOn === 'view') {
                                    this.observer.unobserve(this.container);
                                }
                            }
                        });
                    },
                    { threshold: 0.2 }
                );
                this.observer.observe(this.container);
            }

            start() {
                if (this.isScrambling) return;
                this.revealed = new Set(this.fixedIndices);
                this.iteration = 0;
                this.isScrambling = true;
                this.container.dataset.animating = 'true';
                this.run();
            }

            run() {
                if (this.interval) clearInterval(this.interval);
                if (this.sequential) {
                    this.interval = setInterval(() => {
                        if (this.revealed.size >= this.text.length) {
                            this.finish();
                            return;
                        }
                        const nextIndex = this.getNextIndex();
                        if (nextIndex === null || nextIndex === undefined) {
                            this.finish();
                            return;
                        }
                        this.revealed.add(nextIndex);
                        const scrambled = this.shuffleWithReveals();
                        this.updateDisplay(scrambled, true);
                    }, this.speed);
                } else {
                    this.interval = setInterval(() => {
                        this.iteration += 1;
                        if (this.iteration >= this.maxIterations) {
                            this.finish();
                            return;
                        }
                        const scrambled = this.shuffleRandom();
                        this.updateDisplay(scrambled, true);
                    }, this.speed);
                }
            }

            finish() {
                if (this.interval) {
                    clearInterval(this.interval);
                    this.interval = null;
                }
                this.isScrambling = false;
                this.container.dataset.animating = 'false';
                this.updateDisplay(this.text);
            }

            shuffleWithReveals() {
                return this.text
                    .split('')
                    .map((char, index) => {
                        if (char === '\n' || char === ' ') return char;
                        if (this.revealed.has(index)) {
                            return char;
                        }
                        return this.randomChar();
                    })
                    .join('');
            }

            shuffleRandom() {
                return this.text
                    .split('')
                    .map(char => {
                        if (char === '\n' || char === ' ') return char;
                        return this.randomChar();
                    })
                    .join('');
            }

            randomChar() {
                if (!this.characters.length) return '';
                const index = Math.floor(Math.random() * this.characters.length);
                return this.characters[index];
            }

            getNextIndex() {
                const len = this.text.length;
                const available = index => index >= 0 && index < len && !this.revealed.has(index);

                switch (this.revealDirection) {
                    case 'end':
                        for (let i = len - 1; i >= 0; i--) {
                            if (available(i)) return i;
                        }
                        break;
                    case 'center': {
                        const middle = Math.floor(len / 2);
                        for (let offset = 0; offset < len; offset++) {
                            const right = middle + offset;
                            const left = middle - offset;
                            if (available(right)) return right;
                            if (available(left)) return left;
                        }
                        break;
                    }
                    default:
                        for (let i = 0; i < len; i++) {
                            if (available(i)) return i;
                        }
                }
                return null;
            }

            updateDisplay(value, scrambled = false) {
                if (!this.displayEl) return;
                this.displayEl.innerHTML = '';
                value.split('').forEach((char, index) => {
                    if (char === '\n') {
                        this.displayEl.appendChild(document.createElement('br'));
                        return;
                    }
                    const span = document.createElement('span');
                    span.className = 'decrypt-char';
                    if (scrambled && !this.revealed.has(index) && char !== ' ') {
                        span.classList.add('encrypted');
                    }
                    span.textContent = char;
                    this.displayEl.appendChild(span);
                });
            }
        }

        const body = document.body;
        const toggle = document.querySelector('.theme-toggle');
        const heroSection = document.getElementById('hero');
        const revealItems = document.querySelectorAll('.reveal');
        const skillBars = document.querySelectorAll('.skill-bar');
        const cloudPills = document.querySelectorAll('.skills-cloud .skill-pill');
        const decryptTargets = document.querySelectorAll('[data-decrypt-text]');
        window.addEventListener('load', () => {
            heroSection.classList.add('hero-loaded');
        });

        toggle.addEventListener('click', () => {
            body.classList.toggle('theme-dark');
            body.classList.add('theme-transition');
            setTimeout(() => body.classList.remove('theme-transition'), 500);
        });

        const observer = new IntersectionObserver(
            entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            },
            { threshold: 0.2 }
        );

        revealItems.forEach(item => observer.observe(item));
        decryptTargets.forEach(target => new DecryptedTextEffect(target));

        skillBars.forEach(bar => {
            const target = bar.dataset.level || 0;
            bar.style.setProperty('--target-level', `${target}%`);
            const levelLabel = bar.querySelector('.skill-level');
            if (levelLabel) {
                levelLabel.textContent = `${target}%`;
            }
        });

        const skillObserver = new IntersectionObserver(
            entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('filled');
                        skillObserver.unobserve(entry.target);
                    }
                });
            },
            { threshold: 0.35 }
        );

        skillBars.forEach(bar => skillObserver.observe(bar));

        cloudPills.forEach((pill, index) => {
            const duration = 7 + (index % 4) * 1.2;
            const delay = (index * 0.35) % 5;
            pill.style.setProperty('--float-duration', `${duration}s`);
            pill.style.setProperty('--float-delay', `${delay}s`);
        });

        // --- Line stack navigation behavior ---
        const stackGroups = document.querySelectorAll('.line-stack-group');
        const stackOrder = ['hero', 'about', 'work', 'skills', 'contact'];
        const stackGroupMap = new Map();
        stackGroups.forEach(group => stackGroupMap.set(group.dataset.section, group));

        if (stackGroups.length) {
            stackGroups[0]?.classList.add('is-active');

            const stackTitles = document.querySelectorAll('.line-stack-title');
            stackTitles.forEach(title => {
                title.addEventListener('click', event => {
                    const id = title.closest('.line-stack-group')?.dataset.section;
                    const target = document.getElementById(id);
                    if (!target) return;

                    event.preventDefault();
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });

            const stackSections = stackOrder
                .map(id => document.getElementById(id))
                .filter(Boolean);

            // Removed IntersectionObserver for stackGroups to rely on scroll position for accuracy

            let stackMap = [];
            const buildStackMap = () => {
                stackMap = stackSections.map(section => ({
                    id: section.id,
                    top: section.offsetTop,
                    height: section.offsetHeight || 1
                }));
                updateStackProgress();
            };

            const updateStackProgress = () => {
                const scrollPosition = window.scrollY;
                const viewportCenter = scrollPosition + window.innerHeight * 0.4; // Trigger point at 40% down the screen

                stackMap.forEach(({ id, top, height }) => {
                    let ratio = 0;
                    let emphasis = 0;
                    const group = stackGroupMap.get(id);
                    if (!group) return;

                    // Determine active state based on viewport center overlapping the section
                    const isActive = viewportCenter >= top && viewportCenter < (top + height);
                    group.classList.toggle('is-active', isActive);

                    if (scrollPosition < top) {
                        ratio = 0;
                        emphasis = 0;
                    } else if (scrollPosition >= top && scrollPosition <= top + height) {
                        ratio = (scrollPosition - top) / Math.max(height, 1);
                        ratio = Math.min(Math.max(ratio, 0), 1);
                        // Emphasis starts at 1 (top of section) and goes to 0
                        emphasis = Math.max(1 - ratio, 0);
                    } else {
                        ratio = 1;
                        emphasis = 0;
                    }

                    const title = group.querySelector('.line-stack-title');
                    if (title) {
                        title.style.setProperty('--stack-progress', ratio.toFixed(3));
                        title.style.setProperty('--stack-emphasis', emphasis.toFixed(3));
                    }
                    const lines = group.querySelectorAll('.line-stack-lines span');
                    const activeCount = Math.round(ratio * lines.length);
                    lines.forEach((line, index) => {
                        line.classList.toggle('is-on', index < activeCount);
                    });
                });
            };

            buildStackMap();
            window.addEventListener('resize', () => {
                buildStackMap();
                updateProgressBar();
            });

            const throttledUpdateStack = throttle(updateStackProgress, 50);
            window.addEventListener('scroll', throttledUpdateStack, { passive: true });
        }


        const progressBar = document.querySelector('.scroll-progress-bar');
        if (progressBar) {
            const updateProgressBar = () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const pct = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
                progressBar.style.width = `${pct}%`;
            };

            updateProgressBar();
            const throttledUpdateProgress = throttle(updateProgressBar, 30);
            window.addEventListener('scroll', throttledUpdateProgress, { passive: true });
        }
    </script>
</body>

</html>